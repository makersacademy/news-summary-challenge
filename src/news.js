var getNews = document.getElementById("getNews");

getNews.addEventListener("click", function getNews() {
  var xhr = new XMLHttpRequest();
  xhr.open("GET", "http://news-summary-api.herokuapp.com/guardian?apiRequestUrl=http://content.guardianapis.com/world?show-fields=thumbnail&format=json&total=12", true);
  xhr.onload = function() {
    if(xhr.readyState == 4 && xhr.status == 200) {
      var data = JSON.parse(xhr.responseText);
      displayNews(data);
    }
  };
  xhr.send();
}, false);

function displayNews(data) {
  var results = data.response.results;
  var html = "";
  for (var i = 0; i < results.length; i++) {
    html += `<div class="article-box">`
    html += `<img src="${results[i].fields.thumbnail}" alt="thumbnail">`
    html += `<div class="text-box"><p>${results[i].webTitle}</p>`
    html += `<a href="${results[i].webUrl}" target="_blank">Full article</a>`
    html += `<button class="summary-button" value="${results[i].webUrl}">`
    html += `Article summary</button></div></div>`
  }
  document.getElementById("news").innerHTML = html ;
};

// var exampleData = {"response":{"status":"ok","userTier":"developer","total":176558,"startIndex":1,"pageSize":10,"currentPage":1,"pages":17656,"edition":{"id":"world","webTitle":"World news","webUrl":"https://www.theguardian.com/world","apiUrl":"https://content.guardianapis.com/world","code":"default"},"section":{"id":"world","webTitle":"World news","webUrl":"https://www.theguardian.com/world","apiUrl":"https://content.guardianapis.com/world","editions":[{"id":"world","webTitle":"World news","webUrl":"https://www.theguardian.com/world","apiUrl":"https://content.guardianapis.com/world","code":"default"}]},"results":[{"id":"world/2018/mar/11/russia-tries-to-entice-voters-to-polls-putin-legitimacy","type":"article","sectionId":"world","sectionName":"World news","webPublicationDate":"2018-03-11T11:16:42Z","webTitle":"Russia tries to entice voters to polls to prop up Putin's legitimacy","webUrl":"https://www.theguardian.com/world/2018/mar/11/russia-tries-to-entice-voters-to-polls-putin-legitimacy","apiUrl":"https://content.guardianapis.com/world/2018/mar/11/russia-tries-to-entice-voters-to-polls-putin-legitimacy","fields":{"thumbnail":"https://media.guim.co.uk/f9cdff658156175bcd9ca1956770b5f9df7e8375/0_220_5760_3456/500.jpg"},"isHosted":false,"pillarId":"pillar/news","pillarName":"News"},{"id":"world/2018/mar/11/this-could-destroy-china-parliament-sets-xi-jinping-up-to-rule-for-life","type":"article","sectionId":"world","sectionName":"World news","webPublicationDate":"2018-03-11T08:57:29Z","webTitle":"'This could destroy China': parliament sets Xi Jinping up to rule for life","webUrl":"https://www.theguardian.com/world/2018/mar/11/this-could-destroy-china-parliament-sets-xi-jinping-up-to-rule-for-life","apiUrl":"https://content.guardianapis.com/world/2018/mar/11/this-could-destroy-china-parliament-sets-xi-jinping-up-to-rule-for-life","fields":{"thumbnail":"https://media.guim.co.uk/7003703e9d27d2a6ffc14f9415d1c9e6d3ab5219/0_140_4696_2819/500.jpg"},"isHosted":false,"pillarId":"pillar/news","pillarName":"News"},{"id":"world/2018/mar/11/battle-of-grosvenor-square-50-years-vietnam-protest-donald-macintyre","type":"article","sectionId":"world","sectionName":"World news","webPublicationDate":"2018-03-11T08:04:41Z","webTitle":"My part in the anti-war demo that changed protest for ever","webUrl":"https://www.theguardian.com/world/2018/mar/11/battle-of-grosvenor-square-50-years-vietnam-protest-donald-macintyre","apiUrl":"https://content.guardianapis.com/world/2018/mar/11/battle-of-grosvenor-square-50-years-vietnam-protest-donald-macintyre","fields":{"thumbnail":"https://media.guim.co.uk/0f344e6efaee31427f4bead30cd033d70fb459ca/49_239_4918_2951/500.jpg"},"isHosted":false,"pillarId":"pillar/news","pillarName":"News"},{"id":"world/2018/mar/11/three-billboards-protest-grenfell-tower-florida-shooting","type":"article","sectionId":"world","sectionName":"World news","webPublicationDate":"2018-03-11T08:00:41Z","webTitle":"How three billboards became the new global protest method","webUrl":"https://www.theguardian.com/world/2018/mar/11/three-billboards-protest-grenfell-tower-florida-shooting","apiUrl":"https://content.guardianapis.com/world/2018/mar/11/three-billboards-protest-grenfell-tower-florida-shooting","fields":{"thumbnail":"https://media.guim.co.uk/bc1b293f3c8164bf2667ac2879e6081f32ae5a3a/0_126_3500_2100/500.jpg"},"isHosted":false,"pillarId":"pillar/news","pillarName":"News"},{"id":"world/2018/mar/11/naples-italy-election-five-star-movement","type":"article","sectionId":"world","sectionName":"World news","webPublicationDate":"2018-03-11T05:00:37Z","webTitle":"How Ferrante’s neighbourhood tells a story of Italy’s transformed politics","webUrl":"https://www.theguardian.com/world/2018/mar/11/naples-italy-election-five-star-movement","apiUrl":"https://content.guardianapis.com/world/2018/mar/11/naples-italy-election-five-star-movement","fields":{"thumbnail":"https://media.guim.co.uk/bcf80865fe6eb4289bd7cdb718d168844e008ca3/0_323_5315_3189/500.jpg"},"isHosted":false,"pillarId":"pillar/news","pillarName":"News"},{"id":"world/2018/mar/11/ireland-abortion-repeal-referendum-home-to-vote-pro-choice-campaign","type":"article","sectionId":"world","sectionName":"World news","webPublicationDate":"2018-03-11T00:05:31Z","webTitle":"Pro-choice campaign calls 40,000 Irish expats home for abortion vote","webUrl":"https://www.theguardian.com/world/2018/mar/11/ireland-abortion-repeal-referendum-home-to-vote-pro-choice-campaign","apiUrl":"https://content.guardianapis.com/world/2018/mar/11/ireland-abortion-repeal-referendum-home-to-vote-pro-choice-campaign","fields":{"thumbnail":"https://media.guim.co.uk/fb15cb2fef42110a7857f66f457f1cc3482d0594/0_126_3500_2100/500.jpg"},"isHosted":false,"pillarId":"pillar/news","pillarName":"News"},{"id":"world/2018/mar/11/animal-cruel-electric-shock-pet-training-collar-ban-england","type":"article","sectionId":"world","sectionName":"World news","webPublicationDate":"2018-03-11T00:04:31Z","webTitle":"‘Cruel’ electric shock pet training collars to be banned in England","webUrl":"https://www.theguardian.com/world/2018/mar/11/animal-cruel-electric-shock-pet-training-collar-ban-england","apiUrl":"https://content.guardianapis.com/world/2018/mar/11/animal-cruel-electric-shock-pet-training-collar-ban-england","fields":{"thumbnail":"https://media.guim.co.uk/26c3bedd0397c9cb6e98c0a085800e9198e144fa/0_802_3000_1800/500.jpg"},"isHosted":false,"pillarId":"pillar/news","pillarName":"News"},{"id":"uk-news/2018/mar/10/top-paid-men-women-gender-gap","type":"article","sectionId":"world","sectionName":"World news","webPublicationDate":"2018-03-10T23:02:00Z","webTitle":"Top-paid men outstrip women by 4 to 1, shock figures reveal","webUrl":"https://www.theguardian.com/uk-news/2018/mar/10/top-paid-men-women-gender-gap","apiUrl":"https://content.guardianapis.com/uk-news/2018/mar/10/top-paid-men-women-gender-gap","fields":{"thumbnail":"https://media.guim.co.uk/d7c563788bd7760694cffe2071902f6f8144f883/1866_1330_3987_2394/500.jpg"},"isHosted":false,"pillarId":"pillar/news","pillarName":"News"},{"id":"world/2018/mar/10/eastern-ghouta-syrian-forces-attacking-surrounded-rebels-douma","type":"article","sectionId":"world","sectionName":"World news","webPublicationDate":"2018-03-10T15:02:05Z","webTitle":"Syrian forces attacking eastern Ghouta ‘have surrounded rebels in Douma’","webUrl":"https://www.theguardian.com/world/2018/mar/10/eastern-ghouta-syrian-forces-attacking-surrounded-rebels-douma","apiUrl":"https://content.guardianapis.com/world/2018/mar/10/eastern-ghouta-syrian-forces-attacking-surrounded-rebels-douma","fields":{"thumbnail":"https://media.guim.co.uk/63112088a09745674b0fa791476bcfea781ebac4/0_365_5472_3283/500.jpg"},"isHosted":false,"pillarId":"pillar/news","pillarName":"News"},{"id":"world/2018/mar/10/chill-looks-set-linger-reporting-from-xis-china","type":"article","sectionId":"world","sectionName":"World news","webPublicationDate":"2018-03-10T12:07:17Z","webTitle":"'Every place you go, you are being watched': reporting from Xi's China","webUrl":"https://www.theguardian.com/world/2018/mar/10/chill-looks-set-linger-reporting-from-xis-china","apiUrl":"https://content.guardianapis.com/world/2018/mar/10/chill-looks-set-linger-reporting-from-xis-china","fields":{"thumbnail":"https://media.guim.co.uk/c96053ebef6d697f1f38da806e36e47f00481e1f/0_873_3176_1905/500.jpg"},"isHosted":false,"pillarId":"pillar/news","pillarName":"News"}]}}
//
// var results = exampleData.response.results;
// var htmlString = '';
//
// for (var i = 0; i < results.length; i++) {
//   htmlString += `<div class="article-box"><img src="${results[i].fields.thumbnail}" alt="thumbnail">`
//   htmlString += `<div class="text-box"><p>${results[i].webTitle}</p>`
//   htmlString += `<a href="${results[i].webUrl}" target="_blank">Full article</a>`
//   htmlString += `<button class="summary-button" value="${results[i].webUrl}">Article summary</button></div></div>`
// }
//
// document.getElementById("news").innerHTML = htmlString ;
